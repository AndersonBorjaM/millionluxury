CREATE TABLE [User](
Id INT PRIMARY KEY IDENTITY(1,1),
UserName VARCHAR(250) NOT NULL,
PasswordHash VARCHAR(MAX) NOT NULL
);

CREATE TABLE [Owner](
IdOwner INT PRIMARY KEY IDENTITY(1,1),
Name VARCHAR(250) NOT NULL,
Address VARCHAR(500) NOT NULL,
Photo VARBINARY(MAX),
Birthday DATE NOT NULL
);

CREATE TABLE [Property](
IdProperty INT PRIMARY KEY IDENTITY(1,1),
Name VARCHAR(250) NOT NULL,
Address VARCHAR(500) NOT NULL,
Price DECIMAL(12,3) NOT NULL,
CodeInternal VARCHAR(250) NOT NULL,
Year VARCHAR(5) NOT NULL,
IdOwner INT FOREIGN KEY REFERENCES Owner(IdOwner) NOT NULL
);

CREATE TABLE [PropertyImage](
IdPropertyImage INT PRIMARY KEY IDENTITY(1,1),
IdProperty INT FOREIGN KEY REFERENCES Property(IdProperty) NOT NULL,
FileProperty VARBINARY(MAX),
Enabled BIT
);

CREATE TABLE [PropertyTrace](
IdPropertyTrace INT PRIMARY KEY IDENTITY(1,1),
DateSale DATE NOT NULL,
Name VARCHAR(250) NOT NULL,
Value DECIMAL(12,3) NOT NULL,
Tax VARCHAR(250) NOT NULL,
IdProperty INT FOREIGN KEY REFERENCES Property(IdProperty) NOT NULL
);


INSERT INTO [milliondatabase].[dbo].[User] ([UserName] ,[PasswordHash])
VALUES('Anderson', '$2a$11$BiAfDJ1x41SrMUwq97SLyOfJVF1CGoMLEp5j/smKRFsEjqq3qqJwS')